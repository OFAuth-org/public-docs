---
title: "Hosted Mode - Link API"
description: "Simple redirect-based OnlyFans authentication"
---

## Overview

Hosted Mode provides the simplest integration path for OnlyFans authentication. Users are redirected to OFAuth's secure authentication pages, reducing your security burden while providing a seamless authentication experience.

<Info>
	Prefer a popup experience? Use our [Link Embed Library](/guides/link/embed) to keep users
	in your app rather than redirecting them away from your site.
</Info>

## How It Works

1. **Initialize**: Create a link session with your redirect URL
2. **Redirect/Popup**: Send users to OFAuth's secure authentication page
3. **Authentication**: Users complete authentication on OFAuth's pages
4. **Return**: Users are redirected back to your URL with status and connection details
5. **Process**: Handle the query params to complete the flow

## Integration Options

Hosted Mode offers two integration approaches to fit your application's user experience:

<CardGroup cols={2}>
	<Card title="Redirect Integration" icon="external-link">
		**Traditional Flow** - Redirect users to OFAuth's authentication pages.
		Perfect for web applications and simple mobile integrations.
	</Card>
	<Card title="Popup/Embed Integration" icon="window">
		**Seamless UX** - Use our Embed SDK to display authentication in a popup or
		iframe. Keeps users in your application throughout the flow.
	</Card>
</CardGroup>

## Base URL

```
https://api.ofauth.com/v2/link
```

## Authentication

All requests require your API key header:

```http
apikey: YOUR_API_KEY
```

## Core Endpoints

### Initialize Hosted Session

Create a new hosted authentication session.

<Expandable title="POST /init">

```http
POST /v2/link/init
```

**Headers:**

- `apikey`: Your API key (required)
- `Content-Type`: application/json

**Request Body:**

```json
{
	"redirectUrl": "https://yourapp.com/callback",
	"clientReferenceId": "user_123",
	"connectionId": "conn_existing_123"
}
```

**Parameters:**

| Parameter           | Type   | Required | Description                                                                                 |
| ------------------- | ------ | -------- | ------------------------------------------------------------------------------------------- |
| `redirectUrl`       | string | No       | URL to redirect to after completion. If omitted, uses first Allowed Redirect URI.          |
| `clientReferenceId` | string | No       | Your internal user identifier for webhook correlation                                       |
| `connectionId`      | string | No       | Existing connection ID to reconnect to                                                      |

<Tip>
	Configure your Allowed Redirect URIs in the OFAuth dashboard under Developers → API.
	If you don't specify a `redirectUrl`, the first configured URI is used as the default.
</Tip>

**Response:**

```json
{
	"url": "https://link.ofauth.com/cs_abc123def456",
	"expiresAt": "2024-01-15T10:30:00Z",
	"mode": "hosted"
}
```

</Expandable>

### Redirect Query Parameters

After authentication completes, OFAuth redirects users to your URL with query parameters:

| Outcome | Query Parameters |
|---------|------------------|
| Success | `?status=success&connection_id=conn_xxx&client_reference_id=...` |
| Cancel | `?status=cancelled&step=login&client_reference_id=...` |
| Error | `?status=error&error_code=session_expired&client_reference_id=...` |

**Status Values:**
- `success`: Authentication completed, `connection_id` is available
- `cancelled`: User exited the flow, `step` indicates where
- `error`: Something went wrong, `error_code` provides details

**Step Values (for cancelled):**
- `pre-login`: Before entering credentials
- `authorization`: Reviewing permissions
- `login`: During login
- `2fa`: During two-factor authentication

### Retrieve Session Status

Check the current status of a hosted session.

<Expandable title="GET /{clientSecret}">

```http
GET /v2/link/{clientSecret}
```

**Parameters:**

- `clientSecret`: The client secret from the init response

**Response (Different Status States):**

```json
// Initial state
{
	"status": "initialized"
}

// User is authenticating
{
	"status": "pending"
}

// Authentication completed
{
	"status": "completed",
	"data": {
		"id": "conn_xyz789",
		"userData": {
			"id": "12345",
			"name": "Jane Doe",
			"username": "janedoe",
			"avatar": "https://example.com/avatar.jpg"
		}
	}
}
```

</Expandable>

### Delete Session

Clean up a hosted session.

<Expandable title="DELETE /{clientSecret}">

```http
DELETE /v2/link/{clientSecret}
```

**Headers:**

- `apikey`: Your API key (required)

**Response:**

```json
{
	"success": true
}
```

</Expandable>

## Security: Allowed Redirect URIs

Your `redirectUrl` must be pre-registered in your OFAuth dashboard as an Allowed Redirect URI.

<CardGroup cols={2}>
  <Card title="Exact Match" icon="list-check">
    We require exact URL matches (scheme, host, path). Query parameters are added by OFAuth on redirect.
  </Card>
  <Card title="HTTPS Required" icon="lock">
    Always use HTTPS in production. Configure multiple URLs for different environments.
  </Card>
</CardGroup>

<Tip>
  Configure Allowed Redirect URIs per platform in the OFAuth dashboard under Developers → API.
</Tip>

### Misconfiguration Behavior

- If you pass a `redirectUrl` not on your allowlist, `/v2/link/init` returns `400` with `Link is misconfigured`.
- If no Allowed Redirect URIs are configured, you must add at least one before using Link.

## Implementation Guide

### Step 1: Initialize the Session

<CodeGroup>

```javascript JavaScript
const initResponse = await fetch("https://api.ofauth.com/v2/link/init", {
	method: "POST",
	headers: {
		apikey: "YOUR_API_KEY",
		"Content-Type": "application/json"
	},
	body: JSON.stringify({
		redirectUrl: "https://yourapp.com/callback",
		clientReferenceId: "user_123"
	})
})

const { url } = await initResponse.json()
```

```python Python
import requests

response = requests.post(
    "https://api.ofauth.com/v2/link/init",
    headers={
        "apikey": "YOUR_API_KEY",
        "Content-Type": "application/json"
    },
    json={
        "redirectUrl": "https://yourapp.com/callback",
        "clientReferenceId": "user_123"
    }
)

data = response.json()
auth_url = data["url"]
```

```php PHP
$response = file_get_contents("https://api.ofauth.com/v2/link/init", false, stream_context_create([
    'http' => [
        'method' => 'POST',
        'header' => [
            'apikey: YOUR_API_KEY',
            'Content-Type: application/json'
        ],
        'content' => json_encode([
            'redirectUrl' => 'https://yourapp.com/callback',
            'clientReferenceId' => 'user_123'
        ])
    ]
]));

$data = json_decode($response, true);
$authUrl = $data['url'];
```

</CodeGroup>

### Step 2: Redirect User to Authentication

After initialization, redirect the user to the authentication URL:

```javascript
window.location.href = url // Redirect to authentication page
```

### Step 3: Handle the Callback

When users complete or cancel authentication, they'll be redirected to your URL with query params:

<CodeGroup>

```javascript Client-side
// User visits: https://yourapp.com/callback?status=success&connection_id=conn_abc123&client_reference_id=user_123

const params = new URLSearchParams(window.location.search)
const status = params.get("status")
const connectionId = params.get("connection_id")
const clientReferenceId = params.get("client_reference_id")

if (status === "success" && connectionId) {
	// Store connection ID for future API calls
	localStorage.setItem("connectionId", connectionId)
	// Redirect to dashboard or next step
	window.location.href = "/dashboard"
} else if (status === "cancelled") {
	const step = params.get("step")
	console.log(`User cancelled at: ${step}`)
	// Show appropriate message
} else if (status === "error") {
	const errorCode = params.get("error_code")
	console.error(`Authentication failed: ${errorCode}`)
	// Handle error
}
```

```javascript Server-side (Node.js)
app.get("/callback", async (req, res) => {
	const { status, connection_id, client_reference_id, step, error_code } = req.query

	if (status === "success") {
		// Store connection in your database
		await db.saveConnection({
			userId: client_reference_id,
			connectionId: connection_id
		})
		res.redirect("/dashboard")
	} else if (status === "cancelled") {
		res.redirect(`/connect?cancelled=true&step=${step}`)
	} else {
		res.redirect(`/connect?error=${error_code}`)
	}
})
```

</CodeGroup>

## Integration Examples

### React Component

```javascript
import { useState } from "react"

function ConnectOnlyFansButton({ userId }) {
	const [isLoading, setIsLoading] = useState(false)

	const handleConnect = async () => {
		setIsLoading(true)

		try {
			const response = await fetch("/api/auth/init", {
				method: "POST",
				headers: { "Content-Type": "application/json" },
				body: JSON.stringify({ userId })
			})

			const { url } = await response.json()
			window.location.href = url
		} catch (error) {
			console.error("Failed to initialize authentication:", error)
			setIsLoading(false)
		}
	}

	return (
		<button
			onClick={handleConnect}
			disabled={isLoading}
			className="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
			{isLoading ? "Connecting..." : "Connect OnlyFans Account"}
		</button>
	)
}
```

## Security Best Practices

<CardGroup cols={2}>
	<Card title="Server-Side Verification" icon="shield-check">
		Always verify session status server-side, never trust client-side data
	</Card>
	<Card title="HTTPS Only" icon="lock">
		Use HTTPS for all redirect URLs and API communications
	</Card>
	<Card title="Session Expiry" icon="clock">
		Link sessions expire after 1 hour for security
	</Card>
	<Card title="State Management" icon="database">
		Store connection IDs securely in your database
	</Card>
</CardGroup>

## Error Handling

<AccordionGroup>

<Accordion title="Session Expired">
```json
{
  "error": "Session expired",
  "code": "SESSION_EXPIRED"
}
```
**Solution**: Create a new session with `/init`
</Accordion>

<Accordion title="Invalid Redirect URL">
```json
{
  "error": "Link is misconfigured: invalid redirect URL"
}
```
**Solution**: Add the URL to your Allowed Redirect URIs in the dashboard
</Accordion>

<Accordion title="Authentication Failed">
User is redirected with `?status=error&error_code=invalid_credentials`

**Solution**: User needs to retry authentication with correct credentials
</Accordion>

</AccordionGroup>

## Testing

<Info>
  **Sandbox Mode**: Use sandbox API keys for development. Test sessions work with demo
  credentials that are provided on the hosted authentication page.
</Info>

## Next Steps

<CardGroup cols={3}>
	<Card title="Access API" icon="key" href="/api-reference/access/overview">
		Use connection IDs to access OnlyFans data
	</Card>
	<Card title="Webhooks" icon="webhook" href="/guides/webhooks">
		Get notified of connection events
	</Card>
</CardGroup>

<Info>
  Looking for a fully custom experience? [Enterprise Whitelabel](/enterprise/whitelabel) mode is available for approved partners who need direct control over authentication flows.
</Info>
