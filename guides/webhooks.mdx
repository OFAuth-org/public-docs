---
title: "Webhooks"
description: "Real-time notifications for connection lifecycle changes and system events"
---

## Overview

OFAuth webhooks push structured events to your infrastructure whenever something changes—connection lifecycle updates, dynamic rules changes, and more. No polling required.

## Configuration

Configure webhooks in the [OFAuth Dashboard](https://ofauth.com/platform/settings):

- Set your webhook endpoint URL (HTTPS required)
- Select which events to subscribe to
- View delivery history and retry failed events

<Info>
  All webhook requests come from static IP ranges published in the dashboard. Allowlist them if your firewall blocks unknown sources.
</Info>

## Event Types

Every webhook payload includes:

| Field | Description |
|-------|-------------|
| `eventType` | Event name (e.g., `connection.created`) |
| `live` | Boolean indicating production vs sandbox |
| `data` | Resource-specific payload |

### Connection Events

| Event | Trigger | Data |
|-------|---------|------|
| `connection.created` | New connection established | Full connection object, user metadata |
| `connection.updated` | Connection details changed | Updated connection with `updatedAt` |
| `connection.expired` | Connection lost/invalidated | Connection ID, status, `expiredAt` |

### System Events

| Event | Trigger | Data |
|-------|---------|------|
| `rules.updated` | Dynamic rules changed | Complete rules payload, revision ID |

<Tip>
  Cache `rules.updated` payloads directly—they contain the full rules object, no API call needed.
</Tip>

## Delivery & Retries

OFAuth guarantees reliable delivery with automatic retries:

- **Retry policy**: Exponential backoff (1, 2, 4, 8 min intervals), max 5 attempts
- **Timeout**: 10 seconds per request
- **Ordering**: In-order delivery per `connectionId`; cross-connection is best-effort
- **Dead letter**: Failed events after all retries are moved to DLQ (contact support to replay)

Respond with `2xx` within 10 seconds to acknowledge. Offload heavy processing to background workers.

## Security

### Signature Verification

Each request includes an `OFAuth-Signature` header (HMAC SHA-256):

```
OFAuth-Signature: t=1234567890,v1=abc123...
```

Verify by:
1. Extract timestamp (`t`) and signature (`v1`)
2. Reject if timestamp > 5 minutes old (replay protection)
3. Compute HMAC-SHA256 of `{timestamp}.{raw_body}` with your signing secret
4. Compare signatures using constant-time comparison

### Secret Rotation

Rotate secrets in the [Dashboard](https://ofauth.com/platform/settings) without downtime—overlapping secrets are supported during rotation.

## Implementation Checklist

1. **Accept JSON** - Parse `application/json` body
2. **Verify signature** - Validate before processing
3. **Route by eventType** - Handle each event type appropriately
4. **Respond fast** - Return `2xx` within 10 seconds
5. **Be idempotent** - Store event IDs to handle retries

## Troubleshooting

<AccordionGroup>
  <Accordion title="Webhook Delivery Failed">
    OFAuth exhausted retry attempts.

    **Fix**: Ensure endpoint is reachable and responds `2xx` within 10 seconds. Check Dashboard delivery history to retry.
  </Accordion>

  <Accordion title="Events Not Arriving">
    Expected events aren't being received.

    **Fix**: Verify endpoint URL in Dashboard, check event subscriptions, confirm server accepts POST with JSON body.
  </Accordion>

  <Accordion title="Signature Verification Failing">
    Requests arrive but signature doesn't match.

    **Fix**: Ensure you're using the raw request body (not parsed JSON), check signing secret matches Dashboard, verify timestamp handling.
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={3}>
  <Card title="Connections" icon="plug" href="/guides/connections">
    Manage connection lifecycle
  </Card>
  <Card title="Error Handling" icon="exclamation-triangle" href="/reference/error-handling">
    Handle webhook-related errors
  </Card>
  <Card title="Dynamic Rules" icon="cog" href="/guides/dynamic-rules">
    Use rules.updated events
  </Card>
</CardGroup>
