---
title: "Architecture"
description: "How the OFAuth Go SDK is structured"
---

## Overview

The OFAuth Go SDK provides type-safe access to the OFAuth API. It follows the conventions of the Go language while maintaining a consistent mental model:

1. **Create a client** with your API key
2. **Call methods** organized by API namespace
3. **Handle errors** via Go's native error checking

The SDK is generated from the OpenAPI specification, ensuring consistent behavior and type safety.

## Two API Namespaces

The OFAuth API is organized into two namespaces:

| Namespace | Purpose | Connection ID | Examples |
|-----------|---------|---------------|----------|
| **Account** | Manage your OFAuth organization | Not required | `whoami`, `connections.list`, `settings` |
| **Access** | Read/write OnlyFans data | Required | `self`, `posts`, `chats`, `earnings` |

**Account API** operations manage your OFAuth organization — listing connections, reading settings, and checking account info. These only require your API key.

**Access API** operations interact with OnlyFans data through a specific connection. These require both your API key and a connection ID identifying which OnlyFans account to act on.

## Client Pattern — Builder Pattern + Flat Methods

The Go SDK uses a builder pattern for configuration and flat, typed methods with context:

```go
import "github.com/ofauth-org/onlyfans-sdk-go"

client := ofauth.NewClient("your-api-key").
    WithConnectionID("conn_xxx")

ctx := context.Background()

// Account namespace
account, err := client.Whoami(ctx)
connections, err := client.ListAccountConnections(ctx, nil)

// Access namespace
profile, err := client.GetAccessSelf(ctx, nil)
posts, err := client.ListAccessPosts(ctx, &ofauth.RequestOptions{
    Query: url.Values{"limit": []string{"20"}},
})
```

## Client Structure

The following diagram shows how the client is organized:

```
OFAuth Client
|
|-- API Key (sent as `apiKey` header)
|-- Connection ID (sent as `x-connection-id` header)
|-- Base URL
|
|-- Account Namespace (/v2/account/*)
|   |-- whoami
|   |-- connections (list, delete, invalidate, settings)
|   |-- settings (get, update)
|
|-- Access Namespace (/v2/access/*) — requires connection ID
|   |-- self (creator profile)
|   |-- posts (list, create)
|   |-- chats (messages, conversations)
|   |-- subscribers (list, data)
|   |-- earnings (chart, analytics)
|   |-- vault (media storage)
|   |-- promotions (links, campaigns)
|   |-- uploads (media upload with chunking)
|
|-- Proxy (/v2/access/proxy/*) — call any OnlyFans endpoint
```

## Type Safety

The Go SDK uses generated response structs from the OpenAPI spec:

```go
// Response structs generated from OpenAPI spec
account, _ := client.Whoami(ctx)
// account is *ofauth.WhoamiResponse

account.Id          // string
account.Name        // string
account.Permissions // []string
```

## Error Handling

The Go SDK returns errors using Go's native `error` interface. The SDK provides a typed error struct with status code, message, error code, and details:

```go
account, err := client.Whoami(ctx)
if err != nil {
    if apiErr, ok := err.(*ofauth.APIError); ok {
        fmt.Println(apiErr.Status, apiErr.Message, apiErr.Code)
    }
}
```

## Pagination

The Go SDK uses manual pagination with typed responses and query parameters:

```go
// Manual pagination with typed responses
connections, err := client.ListAccountConnections(ctx, &ofauth.RequestOptions{
    Query: url.Values{
        "limit":  []string{"20"},
        "offset": []string{"0"},
    },
})
for _, conn := range connections.List {
    fmt.Println(conn.Id)
}
```

## SDK Details

| Feature | Go |
|---------|-----|
| Package | `onlyfans-sdk-go` |
| Repository | [onlyfans-sdk-go](https://github.com/OFAuth-org/onlyfans-sdk-go) |
| Client pattern | Builder pattern |
| Type generation | Response structs |
| Pagination | Manual |
| HTTP client | `net/http` (stdlib) |
| Error type | `*APIError` |

<Info>
  The SDK is generated from the OpenAPI specification and provides identical API coverage to other language SDKs. Choose Go when you need zero dependencies and context-based cancellation.
</Info>
