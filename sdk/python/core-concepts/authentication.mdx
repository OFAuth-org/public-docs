---
title: "Authentication"
description: "How to authenticate with the OFAuth API using API keys and connection IDs"
---

## Overview

OFAuth uses a simple two-header authentication model:

| Header | Purpose | Required |
|--------|---------|----------|
| `apiKey` | Identifies your organization | Always |
| `x-connection-id` | Identifies which OnlyFans account to act on | For Access API calls |

The SDK handles setting these headers automatically based on the values you provide during initialization or per-request.

## Client Initialization

Set your API key and an optional default connection ID when creating the client:

```python
from onlyfans_sdk import OFAuthClient

client = OFAuthClient(
    api_key=os.environ["OFAUTH_API_KEY"],
    connection_id="conn_xxx",  # optional default for Access API calls
)
```

## API Key

Your API key authenticates your organization with the OFAuth API. It is sent as the `apiKey` header on every request.

- **Production keys** start with `sk_live_...`
- **Sandbox keys** start with `sk_sandbox_...`

Get your API key from the [OFAuth Dashboard](https://app.ofauth.com/platform/developers/keys).

<Warning>
  Keep your API key secret. Do not commit it to version control or expose it in client-side code.
</Warning>

## Connection ID

A connection ID identifies a specific connected OnlyFans account. It is required for all **Access API** calls (reading posts, earnings, subscribers, etc.) and is sent as the `x-connection-id` header.

Connection IDs are obtained through the [OFAuth Link flow](/guides/link) when a user authenticates their OnlyFans account. They look like `conn_xxx`.

### Setting a Default Connection ID

If your application works with a single connection at a time, set the connection ID on the client during initialization:

```python
client = OFAuthClient(
    api_key="your-api-key",
    connection_id="conn_xxx",
)

# All Access API calls use the default connection ID
from onlyfans_sdk import self as self_module, posts
profile = self_module.list_selfs(client)
post_list = posts.list_posts(client)
```

### Per-Request Connection ID Override

If your application manages multiple connections, you can override the connection ID on individual requests:

```python
from onlyfans_sdk import self as self_module

# Pass connection_id to the client's request method
profile = client.request("GET", "/v2/access/self", connection_id="conn_other")
```

<Info>
  The per-request connection ID takes precedence over the default set on the client.
</Info>

## Account vs Access API Authentication

**Account API** calls only require the API key. No connection ID is needed:

```python
from onlyfans_sdk import account

# No connection ID needed
result = account.whoami(client)
connections = account.list_connections(client)
```

**Access API** calls require both the API key and a connection ID:

```python
from onlyfans_sdk import self as self_module, earnings

# Connection ID required (set on client or per-request)
profile = self_module.list_selfs(client)
```

## Environment Variables

Store your credentials in environment variables rather than hardcoding them:

```bash .env
# Your OFAuth API key
OFAUTH_API_KEY=sk_live_your_api_key_here

# Default connection ID (optional)
OFAUTH_CONNECTION_ID=conn_xxx
```

```python
import os

client = OFAuthClient(
    api_key=os.environ["OFAUTH_API_KEY"],
    connection_id=os.environ.get("OFAUTH_CONNECTION_ID"),
)
```

<Warning>
  Never commit `.env` files to version control. Add `.env` to your `.gitignore`.
</Warning>

## Next Steps

<CardGroup cols={2}>
  <Card title="Configuration" icon="gear" href="/sdk/python/core-concepts/configuration">
    Customize base URLs, HTTP clients, and timeouts
  </Card>
  <Card title="Architecture" icon="sitemap" href="/sdk/python/core-concepts/architecture">
    Understand SDK structure and API namespaces
  </Card>
</CardGroup>
