---
title: "Account & Webhooks"
description: "Manage your OFAuth account, connections, settings, and handle webhook events"
---

## Account Info

Retrieve organization details for the authenticated API key.

```python
from onlyfans_sdk import OFAuthClient, account

client = OFAuthClient(api_key="your-api-key")

info = account.whoami(client)
print(info["id"], info["permissions"])
```

## Connection Management

### List Connections

List all connections for your organization, optionally filtering by status.

```python
from onlyfans_sdk import OFAuthClient, account

client = OFAuthClient(api_key="your-api-key")

# List with filters
connections = account.list_connections(client, status="active", limit=10)
for conn in connections["list"]:
    print(conn["id"], conn["status"], conn["userData"]["username"])

# Auto-paginate through all connections
for conn in account.iter_connections(client, status="active"):
    print(conn["id"])
```

### Delete Connection

Disconnect a connection and log out the user. This stops billing for the connection.

```python
account.delete_connections(client, connection_id="conn_xxx")
```

### Invalidate Connection

Mark a connection as expired and log out the user. The connection record is preserved, allowing the user to reconnect.

```python
account.invalidate_connections(client, connection_id="conn_xxx")
```

## Connection Settings

Get and update settings for individual connections, including vault cache configuration.

```python
# Get connection settings
settings = account.get_connection_settings(client, connection_id="conn_xxx")

# Update connection settings
account.update_connection_settings(client, connection_id="conn_xxx", body={
    "vaultCache": {"enabled": True},
})
```

## Organization Settings

Get and update organization-level settings, including default vault cache configuration.

```python
# Get org settings
org_settings = account.get_org_settings(client)

# Update org settings
account.update_org_settings(client, body={
    "vaultCache": {"enabled": True},
    "applyToExistingConnections": True,
})
```

---

## Webhook Verification

OFAuth sends webhook events using the [Svix](https://www.svix.com/) protocol with HMAC-SHA256 signatures. The SDK includes built-in verification and routing.

<Info>
  Webhooks are configured in the [OFAuth Dashboard](https://app.ofauth.com/platform/developers/webhooks). From there you can set your endpoint URL, select event types, view delivery history, and rotate secrets.
</Info>

### Event Types

<CardGroup cols={2}>
  <Card title="Connection Events" icon="link">
    **connection.created** — New connection established

    **connection.updated** — Connection status or data changed

    **connection.expired** — Connection session expired
  </Card>
  <Card title="System Events" icon="gear">
    **rules.updated** — Dynamic rules configuration changed
  </Card>
</CardGroup>

### Event Payload Structure

All webhook events follow the Svix format with these fields:

```json
{
  "eventType": "connection.created",
  "live": true,
  "data": {
    "connection": {
      "id": "conn_xxx",
      "platformUserId": "12345",
      "status": "active",
      "userData": {
        "userId": "12345",
        "name": "Display Name",
        "username": "creator",
        "avatar": "https://..."
      },
      "permissions": ["earnings:read", "subscribers:read"]
    },
    "clientReferenceId": "your-ref-id"
  }
}
```

### Verifying Signatures

<Warning>
  Always verify webhook signatures before processing events. The signing secret starts with `whsec_` and is available in your dashboard.
</Warning>

```python
from onlyfans_sdk.webhooks import verify_webhook_payload

# Flask / FastAPI — pass raw body and headers
event = verify_webhook_payload(
    payload=request_body,
    headers=request_headers,
    secret="whsec_your_signing_secret",
)
print(event["eventType"], event["data"])
```

### Webhook Router

The SDK provides a router that verifies signatures and dispatches events to typed handlers.

```python
from onlyfans_sdk.webhooks import create_webhook_router

router = create_webhook_router(secret="whsec_your_signing_secret")

def handle_connection_created(event):
    conn = event["data"]["connection"]
    print(f"New connection: {conn['id']} ({conn['userData']['username']})")

def handle_connection_expired(event):
    print(f"Connection expired: {event['data']['connection']['id']}")

router.on("connection.created", handle_connection_created)
router.on("connection.expired", handle_connection_expired)

# Flask integration
from onlyfans_sdk.webhooks import create_flask_webhook_handler
handler = create_flask_webhook_handler(router)
app.add_url_rule("/webhooks", view_func=handler, methods=["POST"])

# FastAPI integration
from onlyfans_sdk.webhooks import create_fastapi_webhook_handler
handle_webhook = create_fastapi_webhook_handler(router)

@app.post("/webhooks")
async def webhook(request: Request):
    return await handle_webhook(request)
```

## Best Practices

<CardGroup cols={2}>
  <Card title="Webhook Security" icon="shield-check">
    - Always verify HMAC signatures before processing
    - Use HTTPS endpoints only
    - Rotate secrets periodically via the dashboard
    - Log events for debugging delivery issues
  </Card>
  <Card title="Reliability" icon="rotate">
    - Process events idempotently (you may receive duplicates)
    - Respond with `200` quickly, then process async
    - Monitor delivery history in the dashboard
    - Use the router's `onError` handler for graceful failures
  </Card>
</CardGroup>

<Note>
  For webhook delivery behavior and retry policies, see the [Webhooks reference](/reference/webhooks).
</Note>
