---
title: "Architecture"
description: "How the OFAuth TypeScript SDK is structured"
---

## Overview

The OFAuth SDK provides type-safe access to the OFAuth API. The SDK follows the conventions of TypeScript while maintaining a consistent mental model:

1. **Create a client** with your API key
2. **Call methods** organized by API namespace
3. **Handle errors** via language-native exceptions

The SDK is generated from the OpenAPI specification, ensuring consistent behavior and type safety.

## Two API Namespaces

The OFAuth API is organized into two namespaces:

| Namespace | Purpose | Connection ID | Examples |
|-----------|---------|---------------|----------|
| **Account** | Manage your OFAuth organization | Not required | `whoami`, `connections.list`, `settings` |
| **Access** | Read/write OnlyFans data | Required | `self`, `posts`, `chats`, `earnings` |

**Account API** operations manage your OFAuth organization — listing connections, reading settings, and checking account info. These only require your API key.

**Access API** operations interact with OnlyFans data through a specific connection. These require both your API key and a connection ID identifying which OnlyFans account to act on.

## Client Pattern — Factory Function + Nested Namespaces

The TypeScript SDK uses a factory function that returns a client with nested namespaces mirroring the API structure:

```typescript
import { createOFAuthClient } from '@ofauth/onlyfans-sdk';

const client = createOFAuthClient({
  apiKey: 'your-api-key',
  connectionId: 'conn_xxx',  // optional default
});

// Account namespace — no connection ID needed
const account = await client.account.whoami();
const connections = await client.account.connections.list();

// Access namespace — uses connection ID
const profile = await client.access.self.get();
const posts = await client.access.listPosts({ limit: 20 });
```

## Client Structure

The following diagram shows how the client is organized:

```
OFAuth Client
|
|-- API Key (sent as `apiKey` header)
|-- Connection ID (sent as `x-connection-id` header)
|-- Base URL
|
|-- Account Namespace (/v2/account/*)
|   |-- whoami
|   |-- connections (list, delete, invalidate, settings)
|   |-- settings (get, update)
|
|-- Access Namespace (/v2/access/*) — requires connection ID
|   |-- self (creator profile)
|   |-- posts (list, create)
|   |-- chats (messages, conversations)
|   |-- subscribers (list, data)
|   |-- earnings (chart, analytics)
|   |-- vault (media storage)
|   |-- promotions (links, campaigns)
|   |-- uploads (media upload with chunking)
|
|-- Proxy (/v2/access/proxy/*) — call any OnlyFans endpoint
```

## Type Safety

The TypeScript SDK provides full type safety with inline types and IntelliSense:

```typescript
import type {
  AccountWhoamiResponse,
  AccountConnectionsListResponse,
  AccessSelfGetResponse,
} from '@ofauth/onlyfans-sdk';

// Response types are automatically inferred
const account = await client.account.whoami();
account.id;          // string
account.name;        // string | null
account.permissions; // string[]
```

## Error Handling

The SDK throws language-native exceptions rather than returning result objects. The typed error class includes status code, message, error code, and details:

```typescript
import { OFAuthAPIError } from '@ofauth/onlyfans-sdk';

try {
  const account = await client.account.whoami();
} catch (error) {
  if (error instanceof OFAuthAPIError) {
    console.error(error.status, error.message, error.code);
  }
}
```

## Pagination

The TypeScript SDK includes async iterator helpers that handle pagination automatically:

```typescript
// Async iterator — yields items one at a time
for await (const connection of client.account.connections.iterate()) {
  console.log(connection.id);
}

// With options
for await (const connection of client.account.connections.iterate({
  maxItems: 100,
  pageSize: 20,
})) {
  console.log(connection.id);
}
```

## SDK Reference

| Feature | TypeScript |
|---------|-----------|
| Package | `@ofauth/onlyfans-sdk` |
| Repository | [onlyfans-sdk-typescript](https://github.com/OFAuth-org/onlyfans-sdk-typescript) |
| Client pattern | Factory function |
| Type generation | Inline from OpenAPI |
| Pagination | Async iterators |
| HTTP client | Custom `fetch` |
| Error type | `OFAuthAPIError` |

<Info>
  The SDK is generated from the OpenAPI specification and provides full API coverage. Choose the configuration that matches your stack.
</Info>
