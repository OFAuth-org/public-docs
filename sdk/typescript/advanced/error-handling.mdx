---
title: "Error Handling"
description: "Catch and handle API errors across all OFAuth SDKs using exception-based patterns"
---

## Overview

All OFAuth SDKs throw exceptions when API requests fail. Each language has a dedicated error class with structured properties for status codes, error codes, messages, and details.

<CardGroup cols={2}>
  <Card title="Exception-Based" icon="shield-check">
    All SDKs throw typed exceptions — use try/catch (or equivalent) to handle errors
  </Card>
  <Card title="Structured Errors" icon="info-circle">
    Every exception includes status code, error code, message, and optional details
  </Card>
</CardGroup>

## Error Classes

Each SDK provides a typed error class with consistent properties:

```typescript
  import { OFAuthAPIError } from '@ofauth/onlyfans-sdk';

  // OFAuthAPIError extends Error
  // Properties:
  //   status: number       — HTTP status code (e.g. 401, 404, 429)
  //   message: string      — Human-readable error description
  //   code: string         — Machine-readable error code (e.g. "UNAUTHORIZED")
  //   details: object      — Additional context (optional)
  //   response: Response   — Raw fetch Response object
  ```

## Basic Error Handling

Wrap API calls in try/catch to handle errors:

```typescript
  import { createOFAuthClient, OFAuthAPIError } from '@ofauth/onlyfans-sdk';

  const client = createOFAuthClient({ apiKey: 'your-api-key' });

  try {
    const account = await client.account.whoami();
    console.log('Account ID:', account.id);
  } catch (error) {
    if (error instanceof OFAuthAPIError) {
      console.error('API Error:', error.status, error.message);
      console.error('Error code:', error.code);
      console.error('Details:', error.details);
    } else {
      // Network error or other unexpected error
      throw error;
    }
  }
  ```

## Common Error Codes

The API returns standard HTTP status codes with structured error bodies:

| Status | Name | Description | Retryable |
|--------|------|-------------|-----------|
| `400` | Bad Request | Invalid parameters or malformed request body | No |
| `401` | Unauthorized | Invalid or missing API key, or expired session | No |
| `403` | Forbidden | Insufficient permissions for this operation | No |
| `404` | Not Found | Resource or endpoint does not exist | No |
| `429` | Too Many Requests | Rate limit exceeded — back off and retry | Yes |
| `500` | Internal Server Error | Unexpected server error — retry with backoff | Yes |
| `502` | Bad Gateway | Upstream service error — retry after delay | Yes |
| `503` | Service Unavailable | Temporary outage — retry after delay | Yes |

<Info>
  Errors also include a `code` string (e.g. `"UNAUTHORIZED"`, `"SESSION_EXPIRED"`, `"RATE_LIMIT_EXCEEDED"`) for more precise programmatic handling. See the [Error Reference](/reference/error-handling) for the full list of error codes.
</Info>

## Handling Specific Errors

Match on the status code or error code to handle different failure scenarios:

```typescript
  import { OFAuthAPIError } from '@ofauth/onlyfans-sdk';

  try {
    const profile = await client.access.self.get();
  } catch (error) {
    if (error instanceof OFAuthAPIError) {
      switch (error.status) {
        case 401:
          // Session expired or invalid API key
          console.log('Authentication failed — re-authenticate the user');
          break;
        case 403:
          console.log('Insufficient permissions for this connection');
          break;
        case 404:
          console.log('Resource not found');
          break;
        case 429:
          console.log('Rate limited — slow down requests');
          break;
        default:
          if (error.status >= 500) {
            console.log('Server error — retry later');
          }
      }
    } else {
      throw error;
    }
  }
  ```

## Retry with Exponential Backoff

For transient errors (429, 500, 502, 503), retry with increasing delays:

```typescript
  import { OFAuthAPIError } from '@ofauth/onlyfans-sdk';

  async function withRetry<T>(
    fn: () => Promise<T>,
    maxRetries = 3
  ): Promise<T> {
    for (let attempt = 0; attempt <= maxRetries; attempt++) {
      try {
        return await fn();
      } catch (error) {
        if (!(error instanceof OFAuthAPIError)) throw error;

        const retryable = [429, 500, 502, 503].includes(error.status);
        if (!retryable || attempt === maxRetries) throw error;

        const delay = Math.min(1000 * Math.pow(2, attempt), 30000);
        console.log(`Retrying in ${delay}ms (attempt ${attempt + 1}/${maxRetries})`);
        await new Promise(resolve => setTimeout(resolve, delay));
      }
    }
    throw new Error('Unreachable');
  }

  // Usage
  const account = await withRetry(() => client.account.whoami());
  ```

## Network Errors

API errors (bad status codes) and network errors (timeouts, DNS failures, connection refused) are different. The SDK error classes only represent API responses — network failures throw the language's native error types.

```typescript
  import { OFAuthAPIError } from '@ofauth/onlyfans-sdk';

  try {
    const account = await client.account.whoami();
  } catch (error) {
    if (error instanceof OFAuthAPIError) {
      // API returned an error response (4xx, 5xx)
      console.error(`API error ${error.status}: ${error.message}`);
    } else if (error instanceof TypeError) {
      // Network failure (fetch throws TypeError for network errors)
      console.error('Network error — check your connection');
    } else {
      // Something else entirely
      console.error('Unexpected error:', error);
    }
  }
  ```

## Best Practices

<CardGroup cols={2}>
  <Card title="Always Catch SDK Exceptions" icon="shield-check">
    Wrap every API call in try/catch. Unhandled exceptions crash your application.
  </Card>
  <Card title="Distinguish API vs Network Errors" icon="wifi">
    Check the exception type to separate server responses from connectivity failures.
  </Card>
  <Card title="Retry Transient Errors" icon="rotate">
    Implement exponential backoff for 429, 500, 502, and 503 status codes.
  </Card>
  <Card title="Log Error Details" icon="file-lines">
    Log `status`, `code`, and `message` to make debugging easier. Include `requestId` from the error details when contacting support.
  </Card>
  <Card title="Handle Auth Errors Gracefully" icon="key">
    On 401 errors, prompt the user to re-authenticate via Link instead of retrying.
  </Card>
  <Card title="Set Timeouts" icon="clock">
    Configure request timeouts to avoid hanging requests. Handle timeout errors separately from API errors.
  </Card>
</CardGroup>

## Next Steps

<CardGroup cols={3}>
  <Card title="Error Reference" icon="book" href="/reference/error-handling">
    Full list of error types and status codes
  </Card>
  <Card title="Rate Limiting" icon="gauge" href="/reference/rate-limiting">
    Token bucket system and backoff strategies
  </Card>
  <Card title="Webhooks" icon="bell" href="/reference/webhooks">
    Get notified of connection status changes
  </Card>
</CardGroup>
