---
title: "Architecture"
description: "How the OFAuth C# SDK is structured"
---

## Overview

The OFAuth SDK provides type-safe access to the OFAuth API. The SDK follows the conventions of C# while maintaining a consistent mental model:

1. **Create a client** with your API key
2. **Call methods** organized by API namespace
3. **Handle errors** via language-native exceptions

The SDK is generated from the OpenAPI specification, ensuring consistent behavior and type safety.

## Two API Namespaces

The OFAuth API is organized into two namespaces:

| Namespace | Purpose | Connection ID | Examples |
|-----------|---------|---------------|----------|
| **Account** | Manage your OFAuth organization | Not required | `whoami`, `connections.list`, `settings` |
| **Access** | Read/write OnlyFans data | Required | `self`, `posts`, `chats`, `earnings` |

**Account API** operations manage your OFAuth organization — listing connections, reading settings, and checking account info. These only require your API key.

**Access API** operations interact with OnlyFans data through a specific connection. These require both your API key and a connection ID identifying which OnlyFans account to act on.

## Client Patterns by Language

### C# — Class Constructor + Generic HTTP Methods

The C# SDK uses a class with generic HTTP methods and path-based routing:

```csharp
using OFAuth;

var client = new OFAuthClient("your-api-key")
    .WithConnectionId("conn_xxx");

// Account namespace
var account = await client.GetAsync<WhoamiResponse>("/v2/account/whoami");
var connections = await client.GetAsync<ConnectionsListResponse>("/v2/account/connections");

// Access namespace
var profile = await client.GetAsync<SelfResponse>("/v2/access/self");
var posts = await client.GetAsync<PostsListResponse>(
    "/v2/access/posts",
    query: new Dictionary<string, string?> { ["limit"] = "20" }
);
```

## Client Structure

The following diagram shows how the client is organized:

```
OFAuth Client
|
|-- API Key (sent as `apiKey` header)
|-- Connection ID (sent as `x-connection-id` header)
|-- Base URL
|
|-- Account Namespace (/v2/account/*)
|   |-- whoami
|   |-- connections (list, delete, invalidate, settings)
|   |-- settings (get, update)
|
|-- Access Namespace (/v2/access/*) — requires connection ID
|   |-- self (creator profile)
|   |-- posts (list, create)
|   |-- chats (messages, conversations)
|   |-- subscribers (list, data)
|   |-- earnings (chart, analytics)
|   |-- vault (media storage)
|   |-- promotions (links, campaigns)
|   |-- uploads (media upload with chunking)
|
|-- Proxy (/v2/access/proxy/*) — call any OnlyFans endpoint
```

## Type Safety

The C# SDK provides type safety using model classes with `JsonPropertyName` attributes:

```csharp
// Model classes with JsonPropertyName attributes
// 473 generated types in Models.cs
var account = await client.GetAsync<WhoamiResponse>("/v2/account/whoami");

account.Id;          // string
account.Name;        // string?
account.Permissions; // List<string>
```

## Error Handling

The SDK throws language-native exceptions rather than returning result objects. The typed error class includes status code, message, error code, and details:

```csharp
try
{
    var account = await client.GetAsync<WhoamiResponse>("/v2/account/whoami");
}
catch (OFAuthException ex)
{
    Console.WriteLine($"{ex.Status} {ex.Message} {ex.Code}");
}
```

## Pagination

The C# SDK uses manual pagination with query parameters:

```csharp
// Manual pagination with query parameters
var connections = await client.GetAsync<ConnectionsListResponse>(
    "/v2/account/connections",
    query: new Dictionary<string, string?> { ["limit"] = "20", ["offset"] = "0" }
);
foreach (var conn in connections.List)
{
    Console.WriteLine(conn.Id);
}
```

## SDK Details

| Feature | C# |
|---------|-----|
| Package | `OnlyFans.SDK` |
| Repository | [onlyfans-sdk-csharp](https://github.com/OFAuth-org/onlyfans-sdk-csharp) |
| Client pattern | Class + generic methods |
| Type generation | Model classes |
| Pagination | Manual |
| HTTP client | `HttpClient` |
| Error type | `OFAuthException` |

<Info>
  The SDK is generated from the OpenAPI specification and provides identical API coverage to the other language SDKs. Choose the one that matches your stack.
</Info>
