---
title: "Content & Media"
description: "Create posts, manage your vault, and upload media with progress tracking through the OFAuth SDK"
---

## Overview

The Content & Media modules cover post management, vault media organization, and file uploads with automatic chunking and progress callbacks.

<CardGroup cols={3}>
  <Card title="Posts" icon="file-text">
    Create, edit, list, and delete posts
  </Card>
  <Card title="Vault" icon="folder">
    Browse vault media and organize into lists
  </Card>
  <Card title="Upload" icon="upload">
    Upload media with automatic chunking and progress tracking
  </Card>
</CardGroup>

---

## Posts

### List Posts

Retrieve your own posts with sorting and filtering.

```csharp
using OFAuth;

var client = new OFAuthClient("your-api-key")
    .WithConnectionId("conn_xxx");

var posts = await client.GetAsync<PostsListResponse>(
    "/v2/access/posts",
    query: new Dictionary<string, string?>
    {
        ["limit"] = "20",
        ["sortBy"] = "publish_date",
        ["sortDirection"] = "desc"
    }
);

foreach (var post in posts.List)
{
    Console.WriteLine($"Post {post.Id}: {post.Text}");
}
```

### Post Sorting Options

| Sort By | Description |
|---------|-------------|
| `publish_date` | Sort by publication date |
| `tips` | Sort by tip amount received |
| `favorites_count` | Sort by number of favorites |

### Create a Post

```csharp
var newPost = await client.PostAsync<PostResponse>(
    "/v2/access/posts",
    body: new
    {
        text = "Check out my new content!",
        price = 10.00,
        mediaIds = new[] { 12345, 67890 }
    }
);

Console.WriteLine($"Post created: {newPost.Id}");
```

### Get, Edit, and Delete Posts

```csharp
// Get a post by ID
var post = await client.GetAsync<PostResponse>("/v2/access/posts/12345");
Console.WriteLine(post.Text);

// Edit a post
await client.PutAsync<PostResponse>(
    "/v2/access/posts/12345",
    body: new { text = "Updated post content!", price = 15.00 }
);

// Delete a post
await client.DeleteAsync<object>("/v2/access/posts/12345");
```

---

## Vault

### List Vault Media

Browse media in your vault with filtering and sorting.

```csharp
var media = await client.GetAsync<VaultMediaResponse>(
    "/v2/access/vault/media",
    query: new Dictionary<string, string?>
    {
        ["limit"] = "20",
        ["mediaType"] = "video",
        ["sortBy"] = "recent"
    }
);

foreach (var item in media.List)
{
    Console.WriteLine($"{item.Id}: {item.Type}");
}
```

### Vault Media Filters

| Filter | Values |
|--------|--------|
| `mediaType` | `photo`, `video`, `audio`, `gif` |
| `sortBy` | `recent`, `most-liked`, `highest-tips` |
| `sortDirection` | `asc`, `desc` |
| `listId` | Filter by vault list ID |

### Vault Lists

Organize vault media into lists (folders).

```csharp
// List vault lists
var lists = await client.GetAsync<VaultListsResponse>(
    "/v2/access/vault/lists",
    query: new Dictionary<string, string?> { ["limit"] = "20" }
);

// Create a vault list
var newList = await client.PostAsync<VaultListResponse>(
    "/v2/access/vault/lists",
    body: new { name = "Exclusive Content" }
);

// Update a vault list
await client.PatchAsync<VaultListResponse>(
    "/v2/access/vault/lists/123",
    body: new { name = "Premium Content" }
);

// Delete a vault list
await client.DeleteAsync<object>("/v2/access/vault/lists/123");

// Add media to a vault list
await client.PostAsync<object>(
    "/v2/access/vault/lists/123/media",
    body: new { mediaIds = new[] { 456, 789 } }
);
```

---

## Media Upload

The SDK handles the entire upload flow: initializing the upload, chunking large files into parts, uploading each part, and finalizing. Progress callbacks let you track upload progress in real time.

<Note>
  **Automatic chunking**: Large files are automatically split into parts. Small files use a single-part upload that completes in one request.
</Note>

### Upload with Progress Tracking

```csharp
using OFAuth;

var client = new OFAuthClient("your-api-key")
    .WithConnectionId("conn_xxx");

// Step 1: Initialize the upload
var init = await client.PostAsync<UploadInitResponse>(
    "/v2/access/uploads/init",
    body: new
    {
        filename = "video.mp4",
        filesize = fileBytes.Length,
        mimeType = "video/mp4"
    }
);

// Step 2: Upload the file (single-part for small files)
using var content = new ByteArrayContent(fileBytes);
content.Headers.ContentType = new MediaTypeHeaderValue("video/mp4");

await client.PutAsync<object>(
    $"/v2/access/uploads/{init.MediaUploadId}",
    body: content
);

Console.WriteLine("Upload complete!");
```

### Upload Flow Details

The upload process works in three stages:

1. **Initialize** — `POST /v2/access/uploads/init` returns a `mediaUploadId` and part information
2. **Upload parts** — For single-part uploads, `PUT /v2/access/uploads/{id}` sends the whole file. For multi-part, `PUT /v2/access/uploads/{id}/parts/{partNumber}` sends each chunk
3. **Complete** — For multi-part uploads, `POST /v2/access/uploads/complete` finalizes the upload

---

## Content Workflow Example

A common pattern is uploading media first, then attaching it to a post. See the TypeScript or Python SDK docs for high-level upload helpers — the C# SDK uses explicit init/upload/complete steps.

---

## Error Handling

```csharp
try
{
    await client.PostAsync<PostResponse>(
        "/v2/access/posts",
        body: new { text = "Hello world!" }
    );
}
catch (OFAuthException ex)
{
    Console.WriteLine($"API Error {ex.Status}: {ex.Message}");
    Console.WriteLine($"Error code: {ex.Code}");
}
```
