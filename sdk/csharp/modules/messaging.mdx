---
title: "Messaging"
description: "Send direct messages, manage mass campaigns, and retrieve conversations through the OFAuth SDK"
---

## Overview

The Messaging module handles all chat and messaging functionality including direct messages, mass message campaigns, and chat media retrieval.

<CardGroup cols={3}>
  <Card title="Chats" icon="messages">
    List conversations and filter by status
  </Card>
  <Card title="Direct Messages" icon="message">
    Send, list, and delete messages in a chat
  </Card>
  <Card title="Mass Messages" icon="megaphone">
    Create and manage mass message campaigns
  </Card>
</CardGroup>

**Permissions required:** `messages:read` for listing, `messages:write` for sending/deleting.

---

## Chat List

Retrieve your active conversations with filtering and pagination.

```csharp
using OFAuth;

var client = new OFAuthClient("your-api-key")
    .WithConnectionId("conn_xxx");

var chats = await client.GetAsync<ChatsListResponse>(
    "/v2/access/chats",
    query: new Dictionary<string, string?>
    {
        ["limit"] = "20",
        ["order"] = "recent",
        ["filter"] = "unread"
    }
);

foreach (var chat in chats.List)
{
    Console.WriteLine(chat.WithUser.Username);
}
```

### Chat List Filters

| Filter | Description |
|--------|-------------|
| `recent` / `old` | Sort by message recency (via `order`) |
| `priority` | Priority conversations only (via `filter`) |
| `who_tipped` | Users who have tipped (via `filter`) |
| `unread` | Unread conversations only (via `filter`) |

You can also filter by `userListId` to show chats only from a specific user list.

---

## Messages

### List Messages in a Chat

Retrieve message history with a specific user.

```csharp
var msgs = await client.GetAsync<ChatsMessagesResponse>(
    "/v2/access/chats/123456789/messages",
    query: new Dictionary<string, string?>
    {
        ["limit"] = "50",
        ["query"] = "search term"
    }
);

foreach (var msg in msgs.List)
{
    Console.WriteLine($"{msg.Text} - {msg.CreatedAt}");
}
```

### Send a Message

Send a direct message to a specific user.

```csharp
var result = await client.PostAsync<ChatMessageResponse>(
    "/v2/access/chats/123456789/messages",
    body: new { text = "Hey! Thanks for subscribing!" }
);

Console.WriteLine($"Message sent: {result.Id}");
```

### Delete (Unsend) a Message

```csharp
await client.DeleteAsync<object>(
    "/v2/access/chats/123456789/messages/987654"
);
```

---

## Mass Messages

Mass messages let you send a single message to multiple fans at once. They can be sent immediately or scheduled.

### List Mass Messages

```csharp
var massMsgs = await client.GetAsync<MassMessagesListResponse>(
    "/v2/access/mass-messages",
    query: new Dictionary<string, string?>
    {
        ["limit"] = "20",
        ["type"] = "scheduled"
    }
);

foreach (var msg in massMsgs.List)
{
    Console.WriteLine($"{msg.Id}: {msg.Text}");
}
```

### Create a Mass Message

```csharp
var massMsg = await client.PostAsync<MassMessageResponse>(
    "/v2/access/mass-messages",
    body: new
    {
        text = "New content available! Check it out!",
        mediaIds = new[] { 12345 }
    }
);

Console.WriteLine($"Mass message created: {massMsg.Id}");
```

### Get, Update, and Delete Mass Messages

```csharp
// Get a specific mass message
var msg = await client.GetAsync<MassMessageResponse>(
    "/v2/access/mass-messages/456"
);

// Update a mass message
await client.PutAsync<MassMessageResponse>(
    "/v2/access/mass-messages/456",
    body: new { text = "Updated message text" }
);

// Delete a mass message
await client.DeleteAsync<object>("/v2/access/mass-messages/456");
```

---

## Chat Media

Retrieve media shared in a chat conversation. Filter by type to get only photos, videos, or audio.

```csharp
var media = await client.GetAsync<ChatsMediaResponse>(
    "/v2/access/chats/123456789/media",
    query: new Dictionary<string, string?>
    {
        ["limit"] = "20",
        ["type"] = "photos"
    }
);

foreach (var item in media.List)
{
    Console.WriteLine($"{item.Id}: {item.Type}");
}
```

---

## Error Handling

All SDKs throw exceptions on API errors. Use try/catch to handle them:

```csharp
try
{
    await client.PostAsync<ChatMessageResponse>(
        "/v2/access/chats/123456789/messages",
        body: new { text = "Hello!" }
    );
}
catch (OFAuthException ex)
{
    Console.WriteLine($"API Error {ex.Status}: {ex.Message}");
    Console.WriteLine($"Error code: {ex.Code}");
}
```

<Warning>
  **Rate Limiting**: OnlyFans has rate limits for messaging. Space out bulk operations and handle `429` status codes with appropriate backoff.
</Warning>
