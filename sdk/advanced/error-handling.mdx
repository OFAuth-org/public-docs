---
title: "Error Handling"
description: "Catch and handle API errors across all OFAuth SDKs using exception-based patterns"
---

## Overview

All OFAuth SDKs throw exceptions when API requests fail. Each language has a dedicated error class with structured properties for status codes, error codes, messages, and details.

<CardGroup cols={2}>
  <Card title="Exception-Based" icon="shield-check">
    All SDKs throw typed exceptions — use try/catch (or equivalent) to handle errors
  </Card>
  <Card title="Structured Errors" icon="info-circle">
    Every exception includes status code, error code, message, and optional details
  </Card>
</CardGroup>

## Error Classes

Each SDK provides a typed error class with consistent properties:

<CodeGroup>
  ```typescript TypeScript
  import { OFAuthAPIError } from '@ofauth/onlyfans-sdk';

  // OFAuthAPIError extends Error
  // Properties:
  //   status: number       — HTTP status code (e.g. 401, 404, 429)
  //   message: string      — Human-readable error description
  //   code: string         — Machine-readable error code (e.g. "UNAUTHORIZED")
  //   details: object      — Additional context (optional)
  //   response: Response   — Raw fetch Response object
  ```

  ```python Python
  from onlyfans_sdk import OFAuthError

  # OFAuthError
  # Properties:
  #   status: int          — HTTP status code (e.g. 401, 404, 429)
  #   message: str         — Human-readable error description
  #   code: str            — Machine-readable error code (e.g. "UNAUTHORIZED")
  #   details: dict        — Additional context (optional)
  ```

  ```go Go
  import "github.com/ofauth-org/onlyfans-sdk-go"

  // *ofauth.APIError
  // Fields:
  //   Status:  int           — HTTP status code (e.g. 401, 404, 429)
  //   Message: string        — Human-readable error description
  //   Code:    string        — Machine-readable error code (e.g. "UNAUTHORIZED")
  //   Details: interface{}   — Additional context (optional)
  ```

  ```csharp C#
  using OFAuth;

  // OFAuthException extends Exception
  // Properties:
  //   Status: int            — HTTP status code (e.g. 401, 404, 429)
  //   Message: string        — Human-readable error description
  //   Code: string           — Machine-readable error code (e.g. "UNAUTHORIZED")
  //   Details: object        — Additional context (optional)
  ```
</CodeGroup>

## Basic Error Handling

Wrap API calls in try/catch to handle errors:

<CodeGroup>
  ```typescript TypeScript
  import { createOFAuthClient, OFAuthAPIError } from '@ofauth/onlyfans-sdk';

  const client = createOFAuthClient({ apiKey: 'your-api-key' });

  try {
    const account = await client.account.whoami();
    console.log('Account ID:', account.id);
  } catch (error) {
    if (error instanceof OFAuthAPIError) {
      console.error('API Error:', error.status, error.message);
      console.error('Error code:', error.code);
      console.error('Details:', error.details);
    } else {
      // Network error or other unexpected error
      throw error;
    }
  }
  ```

  ```python Python
  from onlyfans_sdk import OFAuthClient, OFAuthError, account

  client = OFAuthClient(api_key="your-api-key")

  try:
      result = account.whoami(client)
      print("Account ID:", result["id"])
  except OFAuthError as e:
      print(f"API Error {e.status}: {e.message}")
      print(f"Error code: {e.code}")
      print(f"Details: {e.details}")
  except Exception as e:
      # Network error or other unexpected error
      raise
  ```

  ```go Go
  package main

  import (
      "context"
      "fmt"
      "log"

      "github.com/ofauth-org/onlyfans-sdk-go"
  )

  func main() {
      client := ofauth.NewClient("your-api-key")
      ctx := context.Background()

      account, err := client.Whoami(ctx)
      if err != nil {
          if apiErr, ok := err.(*ofauth.APIError); ok {
              fmt.Printf("API Error %d: %s\n", apiErr.Status, apiErr.Message)
              fmt.Printf("Error code: %s\n", apiErr.Code)
              fmt.Printf("Details: %v\n", apiErr.Details)
          } else {
              // Network error or other unexpected error
              log.Fatal(err)
          }
          return
      }

      fmt.Printf("Account ID: %s\n", account.Id)
  }
  ```

  ```csharp C#
  using OFAuth;

  var client = new OFAuthClient("your-api-key");

  try
  {
      var account = await client.GetAsync<WhoamiResponse>("/v2/account/whoami");
      Console.WriteLine($"Account ID: {account.Id}");
  }
  catch (OFAuthException ex)
  {
      Console.WriteLine($"API Error {ex.Status}: {ex.Message}");
      Console.WriteLine($"Error code: {ex.Code}");
      Console.WriteLine($"Details: {ex.Details}");
  }
  catch (HttpRequestException ex)
  {
      // Network error or other unexpected error
      throw;
  }
  ```
</CodeGroup>

## Common Error Codes

The API returns standard HTTP status codes with structured error bodies:

| Status | Name | Description | Retryable |
|--------|------|-------------|-----------|
| `400` | Bad Request | Invalid parameters or malformed request body | No |
| `401` | Unauthorized | Invalid or missing API key, or expired session | No |
| `403` | Forbidden | Insufficient permissions for this operation | No |
| `404` | Not Found | Resource or endpoint does not exist | No |
| `429` | Too Many Requests | Rate limit exceeded — back off and retry | Yes |
| `500` | Internal Server Error | Unexpected server error — retry with backoff | Yes |
| `502` | Bad Gateway | Upstream service error — retry after delay | Yes |
| `503` | Service Unavailable | Temporary outage — retry after delay | Yes |

<Info>
  Errors also include a `code` string (e.g. `"UNAUTHORIZED"`, `"SESSION_EXPIRED"`, `"RATE_LIMIT_EXCEEDED"`) for more precise programmatic handling. See the [Error Reference](/reference/error-handling) for the full list of error codes.
</Info>

## Handling Specific Errors

Match on the status code or error code to handle different failure scenarios:

<CodeGroup>
  ```typescript TypeScript
  import { OFAuthAPIError } from '@ofauth/onlyfans-sdk';

  try {
    const profile = await client.access.self.get();
  } catch (error) {
    if (error instanceof OFAuthAPIError) {
      switch (error.status) {
        case 401:
          // Session expired or invalid API key
          console.log('Authentication failed — re-authenticate the user');
          break;
        case 403:
          console.log('Insufficient permissions for this connection');
          break;
        case 404:
          console.log('Resource not found');
          break;
        case 429:
          console.log('Rate limited — slow down requests');
          break;
        default:
          if (error.status >= 500) {
            console.log('Server error — retry later');
          }
      }
    } else {
      throw error;
    }
  }
  ```

  ```python Python
  from onlyfans_sdk import OFAuthError

  try:
      profile = self_module.list_selfs(client)
  except OFAuthError as e:
      if e.status == 401:
          # Session expired or invalid API key
          print("Authentication failed — re-authenticate the user")
      elif e.status == 403:
          print("Insufficient permissions for this connection")
      elif e.status == 404:
          print("Resource not found")
      elif e.status == 429:
          print("Rate limited — slow down requests")
      elif e.status >= 500:
          print("Server error — retry later")
  ```

  ```go Go
  account, err := client.Whoami(ctx)
  if err != nil {
      if apiErr, ok := err.(*ofauth.APIError); ok {
          switch apiErr.Status {
          case 401:
              // Session expired or invalid API key
              fmt.Println("Authentication failed — re-authenticate the user")
          case 403:
              fmt.Println("Insufficient permissions for this connection")
          case 404:
              fmt.Println("Resource not found")
          case 429:
              fmt.Println("Rate limited — slow down requests")
          default:
              if apiErr.Status >= 500 {
                  fmt.Println("Server error — retry later")
              }
          }
      } else {
          log.Fatal(err)
      }
  }
  ```

  ```csharp C#
  try
  {
      var profile = await client.GetAsync<SelfResponse>("/v2/access/self");
  }
  catch (OFAuthException ex)
  {
      switch (ex.Status)
      {
          case 401:
              // Session expired or invalid API key
              Console.WriteLine("Authentication failed — re-authenticate the user");
              break;
          case 403:
              Console.WriteLine("Insufficient permissions for this connection");
              break;
          case 404:
              Console.WriteLine("Resource not found");
              break;
          case 429:
              Console.WriteLine("Rate limited — slow down requests");
              break;
          default:
              if (ex.Status >= 500)
                  Console.WriteLine("Server error — retry later");
              break;
      }
  }
  ```
</CodeGroup>

## Retry with Exponential Backoff

For transient errors (429, 500, 502, 503), retry with increasing delays:

<CodeGroup>
  ```typescript TypeScript
  import { OFAuthAPIError } from '@ofauth/onlyfans-sdk';

  async function withRetry<T>(
    fn: () => Promise<T>,
    maxRetries = 3
  ): Promise<T> {
    for (let attempt = 0; attempt <= maxRetries; attempt++) {
      try {
        return await fn();
      } catch (error) {
        if (!(error instanceof OFAuthAPIError)) throw error;

        const retryable = [429, 500, 502, 503].includes(error.status);
        if (!retryable || attempt === maxRetries) throw error;

        const delay = Math.min(1000 * Math.pow(2, attempt), 30000);
        console.log(`Retrying in ${delay}ms (attempt ${attempt + 1}/${maxRetries})`);
        await new Promise(resolve => setTimeout(resolve, delay));
      }
    }
    throw new Error('Unreachable');
  }

  // Usage
  const account = await withRetry(() => client.account.whoami());
  ```

  ```python Python
  import time
  from onlyfans_sdk import OFAuthError

  def with_retry(fn, max_retries=3):
      for attempt in range(max_retries + 1):
          try:
              return fn()
          except OFAuthError as e:
              retryable = e.status in (429, 500, 502, 503)
              if not retryable or attempt == max_retries:
                  raise

              delay = min(2 ** attempt, 30)
              print(f"Retrying in {delay}s (attempt {attempt + 1}/{max_retries})")
              time.sleep(delay)

  # Usage
  result = with_retry(lambda: account.whoami(client))
  ```

  ```go Go
  import (
      "fmt"
      "math"
      "time"

      "github.com/ofauth-org/onlyfans-sdk-go"
  )

  func withRetry[T any](fn func() (T, error), maxRetries int) (T, error) {
      var zero T
      for attempt := 0; attempt <= maxRetries; attempt++ {
          result, err := fn()
          if err == nil {
              return result, nil
          }

          apiErr, ok := err.(*ofauth.APIError)
          if !ok {
              return zero, err
          }

          retryable := apiErr.Status == 429 || apiErr.Status >= 500
          if !retryable || attempt == maxRetries {
              return zero, err
          }

          delay := time.Duration(math.Min(
              float64(time.Second)*math.Pow(2, float64(attempt)),
              float64(30*time.Second),
          ))
          fmt.Printf("Retrying in %v (attempt %d/%d)\n", delay, attempt+1, maxRetries)
          time.Sleep(delay)
      }
      return zero, fmt.Errorf("unreachable")
  }

  // Usage
  account, err := withRetry(func() (*ofauth.WhoamiResponse, error) {
      return client.Whoami(ctx)
  }, 3)
  ```

  ```csharp C#
  using OFAuth;

  async Task<T> WithRetryAsync<T>(
      Func<Task<T>> fn,
      int maxRetries = 3)
  {
      for (int attempt = 0; attempt <= maxRetries; attempt++)
      {
          try
          {
              return await fn();
          }
          catch (OFAuthException ex)
          {
              bool retryable = ex.Status is 429 or 500 or 502 or 503;
              if (!retryable || attempt == maxRetries) throw;

              var delay = TimeSpan.FromSeconds(Math.Min(Math.Pow(2, attempt), 30));
              Console.WriteLine($"Retrying in {delay.TotalSeconds}s (attempt {attempt + 1}/{maxRetries})");
              await Task.Delay(delay);
          }
      }
      throw new InvalidOperationException("Unreachable");
  }

  // Usage
  var account = await WithRetryAsync(
      () => client.GetAsync<WhoamiResponse>("/v2/account/whoami")
  );
  ```
</CodeGroup>

## Network Errors

API errors (bad status codes) and network errors (timeouts, DNS failures, connection refused) are different. The SDK error classes only represent API responses — network failures throw the language's native error types.

<CodeGroup>
  ```typescript TypeScript
  import { OFAuthAPIError } from '@ofauth/onlyfans-sdk';

  try {
    const account = await client.account.whoami();
  } catch (error) {
    if (error instanceof OFAuthAPIError) {
      // API returned an error response (4xx, 5xx)
      console.error(`API error ${error.status}: ${error.message}`);
    } else if (error instanceof TypeError) {
      // Network failure (fetch throws TypeError for network errors)
      console.error('Network error — check your connection');
    } else {
      // Something else entirely
      console.error('Unexpected error:', error);
    }
  }
  ```

  ```python Python
  import httpx
  from onlyfans_sdk import OFAuthError

  try:
      result = account.whoami(client)
  except OFAuthError as e:
      # API returned an error response (4xx, 5xx)
      print(f"API error {e.status}: {e.message}")
  except httpx.TimeoutException:
      # Request timed out
      print("Request timed out — try again")
  except httpx.ConnectError:
      # Could not connect to the server
      print("Network error — check your connection")
  ```

  ```go Go
  import (
      "errors"
      "net"

      "github.com/ofauth-org/onlyfans-sdk-go"
  )

  account, err := client.Whoami(ctx)
  if err != nil {
      if apiErr, ok := err.(*ofauth.APIError); ok {
          // API returned an error response (4xx, 5xx)
          fmt.Printf("API error %d: %s\n", apiErr.Status, apiErr.Message)
      } else if netErr, ok := err.(net.Error); ok && netErr.Timeout() {
          // Request timed out
          fmt.Println("Request timed out — try again")
      } else {
          // Network or other error
          fmt.Println("Network error:", err)
      }
  }
  ```

  ```csharp C#
  using OFAuth;

  try
  {
      var account = await client.GetAsync<WhoamiResponse>("/v2/account/whoami");
  }
  catch (OFAuthException ex)
  {
      // API returned an error response (4xx, 5xx)
      Console.WriteLine($"API error {ex.Status}: {ex.Message}");
  }
  catch (TaskCanceledException)
  {
      // Request timed out
      Console.WriteLine("Request timed out — try again");
  }
  catch (HttpRequestException)
  {
      // Network error (DNS failure, connection refused, etc.)
      Console.WriteLine("Network error — check your connection");
  }
  ```
</CodeGroup>

## Best Practices

<CardGroup cols={2}>
  <Card title="Always Catch SDK Exceptions" icon="shield-check">
    Wrap every API call in try/catch. Unhandled exceptions crash your application.
  </Card>
  <Card title="Distinguish API vs Network Errors" icon="wifi">
    Check the exception type to separate server responses from connectivity failures.
  </Card>
  <Card title="Retry Transient Errors" icon="rotate">
    Implement exponential backoff for 429, 500, 502, and 503 status codes.
  </Card>
  <Card title="Log Error Details" icon="file-lines">
    Log `status`, `code`, and `message` to make debugging easier. Include `requestId` from the error details when contacting support.
  </Card>
  <Card title="Handle Auth Errors Gracefully" icon="key">
    On 401 errors, prompt the user to re-authenticate via Link instead of retrying.
  </Card>
  <Card title="Set Timeouts" icon="clock">
    Configure request timeouts to avoid hanging requests. Handle timeout errors separately from API errors.
  </Card>
</CardGroup>

## Next Steps

<CardGroup cols={3}>
  <Card title="Error Reference" icon="book" href="/reference/error-handling">
    Full list of error types and status codes
  </Card>
  <Card title="Rate Limiting" icon="gauge" href="/reference/rate-limiting">
    Token bucket system and backoff strategies
  </Card>
  <Card title="Webhooks" icon="bell" href="/reference/webhooks">
    Get notified of connection status changes
  </Card>
</CardGroup>
